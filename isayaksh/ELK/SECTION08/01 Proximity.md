# Proximity
- Proximity 검색은 특정 단어들이 지정된 거리 이내에 위치한 문서들을 검색할 수 있게 해준다.
  - `match_phrase` 쿼리는 지정된 필드에서 **정확한 단어 순서의 구문(phrase)**이 포함된 문서를 찾는다.
  - `slop` 파라미터는 문장 내에서 검색어들 사이에 얼마나 많은 단어가 끼어 있어도 허용할 것인지를 정의한다.
    - `slop`이 0이면 정확히 일치하는 문장만 일치로 간주하고,
    - 값이 클수록 검색어 사이에 더 많은 단어가 있어도 매칭으로 인정한다.

### 🔥 주의사항
- slop을 너무 크게 주면 정확도가 떨어지고, 퍼포먼스도 저하될 수 있다

### 🔥 Analyzer에 따라 결과가 달라질 수 있다???

**slop의 단위는 "토큰(token) 수"** 이고, 분석기(analyzer)에 따라 slop의 기준이 달라질 수 있다.

#### 🔍 예시로 이해하기

문장: `"The quick brown fox"`

(1) 표준 분석기 (standard analyzer)
- 토큰: [the, quick, brown, fox]
- "quick fox" 사이에 brown 1개 → slop 1 필요

(2) 사용자 정의 분석기 (stop word 제거: "the" 제거)
- 토큰: [quick, brown, fox]
- "quick fox" 사이에 brown 1개 → slop 1 여전히 필요 (달라지지 않음)

(3) 사용자 정의 분석기 (불용어 + 동의어 처리)
- "quick" → [quick, fast] 로 변환됨
- "fox" → [fox, animal]
- slop 계산 시 여러 토큰이 삽입된 것처럼 인식될 수 있음

✅ 결론 요약
- slop의 단위는 토큰 수이며, 토큰은 분석기에서 생성된 단어 단위다
- 따라서, 분석기가 어떤 방식으로 토큰을 분리·변환하느냐에 따라 slop의 해석 범위가 달라질 수 있다
- 즉, 같은 slop 값이라도 분석기의 설정에 따라 실제 허용 거리 체감이 달라질 수 있음